//const _0x2f0c2f=_0x358d;(function(_0x14697b,_0x4a11be){const _0x307bfb=_0x358d,_0x559bcc=_0x14697b();while(!![]){try{const _0x850d20=-parseInt(_0x307bfb(0x109))/0x1*(parseInt(_0x307bfb(0xb7))/0x2)+-parseInt(_0x307bfb(0x13c))/0x3+-parseInt(_0x307bfb(0x142))/0x4*(parseInt(_0x307bfb(0x12d))/0x5)+-parseInt(_0x307bfb(0xa9))/0x6*(parseInt(_0x307bfb(0x92))/0x7)+parseInt(_0x307bfb(0x89))/0x8+parseInt(_0x307bfb(0xbd))/0x9+parseInt(_0x307bfb(0x12a))/0xa;if(_0x850d20===_0x4a11be)break;else _0x559bcc['push'](_0x559bcc['shift']());}catch(_0x5e7ea7){_0x559bcc['push'](_0x559bcc['shift']());}}}(_0x23ca,0x7285d));const firebaseConfig={'apiKey':_0x2f0c2f(0xc7),'authDomain':_0x2f0c2f(0xc2),'databaseURL':_0x2f0c2f(0x14f),'projectId':_0x2f0c2f(0x100),'storageBucket':_0x2f0c2f(0x108),'messagingSenderId':_0x2f0c2f(0x14e),'appId':_0x2f0c2f(0x7b),'measurementId':_0x2f0c2f(0xfb)};firebase[_0x2f0c2f(0x9a)](firebaseConfig);const database=firebase[_0x2f0c2f(0xba)](),storage=firebase['storage']();let currentMonth=null,selectedReservationKey=null;function formatPrice(_0x57708e){const _0x10acd0=_0x2f0c2f;return _0x57708e[_0x10acd0(0x94)](_0x10acd0(0x121),{'minimumFractionDigits':0x0})+_0x10acd0(0xf5);}function checkCredentials(_0x2df32f,_0x365a4a){const _0x1e9527=_0x2f0c2f;return database[_0x1e9527(0x68)](_0x1e9527(0xdc)+_0x2df32f)['once'](_0x1e9527(0xb8))[_0x1e9527(0xfe)](_0x4edb58=>{const _0x51ace5=_0x1e9527;if(_0x4edb58[_0x51ace5(0xc5)]()){const _0x3702eb=_0x4edb58['val']();if(_0x3702eb['password']===_0x365a4a)return window[_0x51ace5(0x71)]=_0x2df32f,window[_0x51ace5(0x129)]=_0x3702eb[_0x51ace5(0x9d)],!![];}return![];});}document[_0x2f0c2f(0x154)](_0x2f0c2f(0xa0))['addEventListener'](_0x2f0c2f(0x81),function(_0x41dd99){const _0x2c9c71=_0x2f0c2f;_0x41dd99[_0x2c9c71(0xdd)]();const _0x37b396=document[_0x2c9c71(0x154)](_0x2c9c71(0x11d))[_0x2c9c71(0xb8)],_0x572c0f=document[_0x2c9c71(0x154)](_0x2c9c71(0xbf))[_0x2c9c71(0xb8)];checkCredentials(_0x37b396,_0x572c0f)[_0x2c9c71(0xfe)](_0x222a10=>{const _0x4831d3=_0x2c9c71;if(_0x222a10){document[_0x4831d3(0x154)]('loginPage')['style'][_0x4831d3(0xd6)]=_0x4831d3(0x13f),document[_0x4831d3(0x154)](_0x4831d3(0xae))[_0x4831d3(0x145)][_0x4831d3(0xd6)]='block',document[_0x4831d3(0x154)](_0x4831d3(0xa4))[_0x4831d3(0xaf)]=_0x4831d3(0xd3)+window[_0x4831d3(0x71)],document[_0x4831d3(0x154)](_0x4831d3(0x93))[_0x4831d3(0xaf)]=_0x4831d3(0xf3)+window[_0x4831d3(0x129)];if(window[_0x4831d3(0x129)]===_0x4831d3(0x73)){const _0x508260=document['querySelectorAll'](_0x4831d3(0x85)),_0x4fd987=document[_0x4831d3(0x79)](_0x4831d3(0x153));_0x508260['forEach'](_0x508b74=>_0x508b74[_0x4831d3(0x145)]['display']=_0x4831d3(0xcd)),_0x4fd987[_0x4831d3(0xf8)](_0x5abd76=>_0x5abd76[_0x4831d3(0x145)][_0x4831d3(0xd6)]='inline-block');}else{if(window[_0x4831d3(0x129)]===_0x4831d3(0x161)){const _0x1fb7c9=document[_0x4831d3(0x79)](_0x4831d3(0xcf));_0x1fb7c9[_0x4831d3(0xf8)](_0xcef3a2=>_0xcef3a2[_0x4831d3(0x11f)]=!![]);}}loadDataFromDatabase();}else alert('Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.');});});const togglePassword=document[_0x2f0c2f(0xc3)](_0x2f0c2f(0x105)),password=document[_0x2f0c2f(0xc3)](_0x2f0c2f(0xce));togglePassword[_0x2f0c2f(0x9f)]('click',function(_0x5e6687){const _0x19106c=_0x2f0c2f,_0x433a10=password['getAttribute'](_0x19106c(0xb2))==='password'?_0x19106c(0x96):'password';password[_0x19106c(0x116)](_0x19106c(0xb2),_0x433a10),this['classList'][_0x19106c(0x128)](_0x19106c(0xd4));});function _0x23ca(){const _0x1617dc=['files','reservationTable','Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27image:','797498750723','https://razia-data-default-rtdb.firebaseio.com','insertCell','orderByChild','editRetourMontantAjoute','.delete-icon','getElementById','saleType','trancheForm','removeChild','getDownloadURL','focus','editDesignation','length','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20:','grid','span','montantAjoute','dataTable','standard','editReservationTelephone','data-key','editRetourAncienneImage','block','Erreur\x20lors\x20du\x20marquage\x20de\x20la\x20réservation\x20comme\x20payée\x20:','cells','fas\x20fa-trash\x20delete-icon','Veuillez\x20saisir\x20un\x20montant\x20valide\x20pour\x20la\x20tranche.','close-image-modal','editReservationFormattedAdvance','ref','editReservationAdvanceAmount','editMontantAjoute','editRetourDataKey','quantity','button','colSpan','maxWidth','tbody','loggedInUsername','child','admin','Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20la\x20nouvelle\x20image:','long','code','formattedAdvance','error','querySelectorAll','ancienneImage','1:797498750723:web:385d55e45ab4a0221b1b36','catch','closest','child_changed','reservation','Format\x20de\x20date\x20incorrect:\x20','submit','createElement','insertRow','retoursContainer','.edit-icon','Enregistrer','formattedMontantAjoute','image-modal','2954056IEqXmD','editReservationDataKey','La\x20réservation\x20a\x20été\x20marquée\x20comme\x20payée\x20et\x20ajoutée\x20aux\x20ventes.','child_added','selected','default','editRetourModal','images/','input','1074017twjUxm','userStatusDisplay','toLocaleString','getElementsByTagName','text','formattedModalAdvance','key','alt','initializeApp','editRetourFormattedMontantAjoute','Image','status','split','addEventListener','loginForm','parentNode','toggleRetoursButton','designation','usernameDisplay','Le\x20retour\x20a\x20été\x20enregistré\x20avec\x20succès.','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20paiement\x20de\x20la\x20tranche\x20:','Aucune\x20image','toggleReservationsButton','6hSUDIo','formattedEditAdvance','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20données\x20:','trancheModalAvance','trancheModalDesignation','mainPage','textContent','appendChild','Veuillez\x20sélectionner\x20une\x20réservation\x20dans\x20le\x20tableau.','type','editSaleType','_ancienne.jpg','trancheModal','reservationsContainer','2EpjXZJ','value','advanceModal','database','Erreur\x20lors\x20du\x20paiement\x20total\x20de\x20la\x20réservation\x20:','classList','263727DSKWvc','toggleTableButton','password','.jpg','editReservationFormattedPrice','razia-data.firebaseapp.com','querySelector','editQuantity','exists','Les\x20données\x20du\x20retour\x20ont\x20été\x20mises\x20à\x20jour\x20avec\x20succès.','AIzaSyBMioKaf2knW9BtrdUkrteEcIaKBJvG8JE','Les\x20données\x20de\x20la\x20réservation\x20ont\x20été\x20mises\x20à\x20jour\x20avec\x20succès.','start','Vous\x20n\x27êtes\x20pas\x20autorisé\x20à\x20supprimer\x20des\x20données.','formattedTrancheAmount','val','inline-block','#password','#dataForm\x20input,\x20#dataForm\x20select,\x20#dataForm\x20button','trancheModalPrice','telephone','body','Utilisateur\x20:\x20','fa-eye-slash','smooth','display','editReservationDesignation','getMetadata','fas\x20fa-edit\x20edit-icon','month-separator','editFormattedPrice','users/','preventDefault','innerHTML','vente','retours/','Les\x20données\x20ont\x20été\x20enregistrées\x20avec\x20succès\x20dans\x20le\x20tableau\x20des\x20ventes.','editReservationForm','editRetourQuantity','click','editRetourPrice','editReservationModal','trancheAmount','replace','update','reset','target','Vous\x20n\x27êtes\x20pas\x20autorisé\x20à\x20enregistrer\x20des\x20données.','Vous\x20n\x27êtes\x20pas\x20autorisé\x20à\x20modifier\x20les\x20données.','editRetourField','scrollIntoView','remove','editPrice','rows','Statut\x20:\x20','tableContainer','\x20F\x20CFA','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cet\x20enregistrement\x20?','editTelephone','forEach','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Enregistrement...','editImage','G-F4MYMJVSRV','child_removed','editRetourDesignation','then','100px','razia-data','put','Le\x20paiement\x20de\x20la\x20tranche\x20a\x20été\x20enregistré.\x20Nouveau\x20montant\x20avancé\x20:\x20','advanceForm','filter','#togglePassword','Nouvelle\x20Image','Image\x20agrandie','razia-data.appspot.com','647305jMvaBe','reservations/','Image\x20non\x20disponible','error-row','storage/object-not-found','advance','reservations','editRetourDate','className','editDate','push','Ancienne\x20Image','editReservationQuantity','setAttribute','retour','img','La\x20réservation\x20a\x20été\x20entièrement\x20payée\x20et\x20déplacée\x20vers\x20le\x20tableau\x20des\x20ventes.','once','_nouvelle.jpg','add','username','editRetourFormattedPrice','disabled','advanceField','fr-FR','editeur','L\x27enregistrement\x20a\x20été\x20supprimé\x20avec\x20succès.','Erreur\x20lors\x20de\x20l\x27enregistrement\x20des\x20données\x20:','price','Erreur:\x20format\x20de\x20date\x20incorrect\x20(','editDataKey','toggle','loggedInUserStatus','16410100mJHqDz','editAdvanceField','editReservationDate','1154355hklzWV','dataForm','editReservationPrice','formattedEditMontantAjoute','formattedPrice','retours','fullPath','div','Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27ancienne\x20image:','all','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20la\x20réservation\x20:','editForm','\x20tr[data-key=\x22','retourTable','getFullYear','1616634eNMaVF','date','set','none','getAttribute','maxHeight','4CYcezr','editRetourImage','editModal','style','src','advanceAmount','image','button[type=\x22submit\x22]','editAncienneImage'];_0x23ca=function(){return _0x1617dc;};return _0x23ca();}function toggleAdvanceField(_0x27c27e=_0x2f0c2f(0x120)){const _0x34dc8c=_0x2f0c2f,_0x353c18=document[_0x34dc8c(0x154)](_0x27c27e),_0x376020=document[_0x34dc8c(0x154)](_0x34dc8c(0x155))['value'];_0x353c18['style'][_0x34dc8c(0xd6)]=_0x376020==='reservation'?_0x34dc8c(0x15d):_0x34dc8c(0x13f),document[_0x34dc8c(0x154)]('retourField')[_0x34dc8c(0x145)][_0x34dc8c(0xd6)]=_0x376020===_0x34dc8c(0x117)?_0x34dc8c(0x15d):_0x34dc8c(0x13f);if(_0x27c27e===_0x34dc8c(0x12b)){const _0x3b86fe=document[_0x34dc8c(0x154)]('editSaleType')[_0x34dc8c(0xb8)];_0x353c18['style'][_0x34dc8c(0xd6)]=_0x3b86fe===_0x34dc8c(0x7f)?'grid':_0x34dc8c(0x13f),document[_0x34dc8c(0x154)](_0x34dc8c(0xee))[_0x34dc8c(0x145)]['display']=_0x3b86fe==='retour'?_0x34dc8c(0x15d):_0x34dc8c(0x13f);}}document['getElementById'](_0x2f0c2f(0x12e))[_0x2f0c2f(0x9f)](_0x2f0c2f(0x81),function(_0x287d03){const _0x12ccec=_0x2f0c2f;_0x287d03[_0x12ccec(0xdd)]();if(window[_0x12ccec(0x129)]==='admin'||window[_0x12ccec(0x129)]===_0x12ccec(0x122)){const _0x5d220d=document[_0x12ccec(0x154)]('date')[_0x12ccec(0xb8)],_0x42bfd3=document[_0x12ccec(0x154)]('saleType')['value'],_0x4c0bc0=document[_0x12ccec(0x154)](_0x12ccec(0x6c))[_0x12ccec(0xb8)],_0x2770ce=document[_0x12ccec(0x154)](_0x12ccec(0xa3))[_0x12ccec(0xb8)],_0x2e5764=parseFloat(document[_0x12ccec(0x154)]('price')[_0x12ccec(0xb8)][_0x12ccec(0xe8)](/\sF CFA$/,'')[_0x12ccec(0xe8)](/\s/g,'')),_0x4e3bd7=_0x42bfd3===_0x12ccec(0x7f)?parseFloat(document['getElementById']('advanceAmount')[_0x12ccec(0xb8)]):0x0,_0x26a0b0=_0x42bfd3===_0x12ccec(0x7f)?document[_0x12ccec(0x154)](_0x12ccec(0xd1))['value']:'',_0x1b5728=_0x42bfd3===_0x12ccec(0x117)?parseFloat(document[_0x12ccec(0x154)]('montantAjoute')['value']):0x0,_0x4faa5e=document[_0x12ccec(0x154)](_0x12ccec(0x148))[_0x12ccec(0x14b)][0x0],_0x42b00e=_0x42bfd3===_0x12ccec(0x117)?document[_0x12ccec(0x154)](_0x12ccec(0x7a))[_0x12ccec(0x14b)][0x0]:null,_0x214d41={'date':_0x5d220d,'saleType':_0x42bfd3,'quantity':_0x4c0bc0,'designation':_0x2770ce,'price':_0x2e5764,'advance':_0x4e3bd7,'telephone':_0x26a0b0,'montantAjoute':_0x1b5728};if(!_0x4faa5e){alert('Veuillez\x20sélectionner\x20une\x20image.');return;}let _0x51f778;if(_0x42bfd3===_0x12ccec(0x7f))_0x51f778=database[_0x12ccec(0x68)](_0x12ccec(0x10f))[_0x12ccec(0x113)]();else _0x42bfd3==='retour'?_0x51f778=database['ref'](_0x12ccec(0x132))[_0x12ccec(0x113)]():_0x51f778=database[_0x12ccec(0x68)]()[_0x12ccec(0x113)]();const _0x1cdad0=_0x287d03['target']['querySelector'](_0x12ccec(0x149));_0x1cdad0['innerHTML']=_0x12ccec(0xf9),_0x1cdad0[_0x12ccec(0x11f)]=!![],_0x51f778[_0x12ccec(0x13e)](_0x214d41)[_0x12ccec(0xfe)](()=>{const _0x51704a=_0x12ccec;if(_0x42bfd3===_0x51704a(0x117)&&_0x4faa5e&&_0x42b00e){const _0x45fe53=storage[_0x51704a(0x68)]()[_0x51704a(0x72)](_0x51704a(0x90)+_0x51f778[_0x51704a(0x98)]+_0x51704a(0x11b)),_0x3f7e5a=storage[_0x51704a(0x68)]()[_0x51704a(0x72)](_0x51704a(0x90)+_0x51f778[_0x51704a(0x98)]+_0x51704a(0xb4));return Promise[_0x51704a(0x136)]([_0x45fe53['put'](_0x4faa5e),_0x3f7e5a[_0x51704a(0x101)](_0x42b00e)])[_0x51704a(0xfe)](([_0xf919c8,_0x5c09fc])=>{const _0x448c9f=_0x51704a;return _0x51f778[_0x448c9f(0xe9)]({'image':_0xf919c8[_0x448c9f(0x68)][_0x448c9f(0x133)],'ancienneImage':_0x5c09fc[_0x448c9f(0x68)]['fullPath']});});}else{if(_0x4faa5e){const _0x270299=storage[_0x51704a(0x68)]()[_0x51704a(0x72)](_0x51704a(0x90)+_0x51f778['key']+_0x51704a(0xc0));return _0x270299['put'](_0x4faa5e)[_0x51704a(0xfe)](_0x4bfeed=>{const _0x41df55=_0x51704a;return _0x51f778[_0x41df55(0xe9)]({'image':_0x4bfeed[_0x41df55(0x68)][_0x41df55(0x133)]});});}}})[_0x12ccec(0xfe)](()=>{const _0xb575b1=_0x12ccec,_0x1a694a=_0x42bfd3===_0xb575b1(0x7f)?'La\x20réservation\x20a\x20été\x20enregistrée\x20avec\x20succès.':_0x42bfd3==='retour'?_0xb575b1(0xa5):_0xb575b1(0xe1);alert(_0x1a694a),clearTable(),loadDataFromDatabase();const _0x12c5e7=_0x42bfd3===_0xb575b1(0x7f)?_0xb575b1(0xb6):_0x42bfd3===_0xb575b1(0x117)?_0xb575b1(0x84):'tableContainer';document['getElementById'](_0x12c5e7)[_0xb575b1(0x145)][_0xb575b1(0xd6)]='block';const _0x52b05e=['tableContainer',_0xb575b1(0xb6),_0xb575b1(0x84)][_0xb575b1(0x104)](_0x1bfa4b=>_0x1bfa4b!==_0x12c5e7);_0x52b05e['forEach'](_0x3ef56b=>document[_0xb575b1(0x154)](_0x3ef56b)[_0xb575b1(0x145)][_0xb575b1(0xd6)]=_0xb575b1(0x13f)),document[_0xb575b1(0x154)](_0x12c5e7)[_0xb575b1(0xef)]({'behavior':'smooth'}),resetForm(_0xb575b1(0x12e)),document[_0xb575b1(0x154)](_0xb575b1(0x155))[_0xb575b1(0xb8)]='vente',toggleAdvanceField(),document[_0xb575b1(0x154)](_0xb575b1(0x13d))[_0xb575b1(0x159)](),_0x1cdad0[_0xb575b1(0xde)]=_0xb575b1(0x86),_0x1cdad0[_0xb575b1(0x11f)]=![];})[_0x12ccec(0x7c)](_0x120492=>{const _0xada7da=_0x12ccec;console[_0xada7da(0x78)](_0xada7da(0x124),_0x120492),_0x1cdad0['innerHTML']=_0xada7da(0x86),_0x1cdad0[_0xada7da(0x11f)]=![];});}else alert(_0x12ccec(0xec));});function addRowToTable(_0x2391f0,_0x19ffd4,_0x5f4a1c=_0x2f0c2f(0x160),_0x34ea80=![]){const _0x7d2e06=_0x2f0c2f,_0x4542cc=document['getElementById'](_0x5f4a1c)[_0x7d2e06(0x95)]('tbody')[0x0],_0xad1318=_0x2391f0['date']['split']('-');if(_0xad1318[_0x7d2e06(0x15b)]===0x3){const _0x13e95a=parseInt(_0xad1318[0x0],0xa),_0x334faf=parseInt(_0xad1318[0x1],0xa)-0x1,_0xb3e8a1=parseInt(_0xad1318[0x2],0xa),_0x425854=new Date(_0x13e95a,_0x334faf,_0xb3e8a1),_0xad9e5c=_0x425854[_0x7d2e06(0x94)](_0x7d2e06(0x8e),{'month':_0x7d2e06(0x75)})+'\x20'+_0x425854[_0x7d2e06(0x13b)]();_0x34ea80?currentMonth!==_0xad9e5c&&(addMonthSeparator(_0x4542cc,_0xad9e5c,_0x34ea80),currentMonth=_0xad9e5c):_0xad9e5c!==currentMonth&&(addMonthSeparator(_0x4542cc,_0xad9e5c,_0x34ea80),currentMonth=_0xad9e5c);}else{console[_0x7d2e06(0x78)](_0x7d2e06(0x80)+_0x2391f0[_0x7d2e06(0x13d)]);const _0x53fff8=_0x4542cc[_0x7d2e06(0x83)](_0x34ea80?0x0:null),_0x498631=_0x53fff8[_0x7d2e06(0x150)]();_0x498631[_0x7d2e06(0x6e)]=0x7,_0x498631[_0x7d2e06(0xaf)]=_0x7d2e06(0x126)+_0x2391f0['date']+')',_0x498631['classList']['add']('error-row');return;}const _0x530d47=_0x4542cc[_0x7d2e06(0x83)](_0x34ea80?0x0:null);_0x530d47[_0x7d2e06(0x116)](_0x7d2e06(0x163),_0x19ffd4),_0x530d47[_0x7d2e06(0x150)]()[_0x7d2e06(0xaf)]=_0x2391f0['date'],_0x530d47[_0x7d2e06(0x150)]()[_0x7d2e06(0xaf)]=_0x2391f0[_0x7d2e06(0x155)],_0x530d47[_0x7d2e06(0x150)]()[_0x7d2e06(0xaf)]=_0x2391f0[_0x7d2e06(0x6c)],_0x530d47[_0x7d2e06(0x150)]()[_0x7d2e06(0xaf)]=_0x2391f0['designation'],_0x530d47[_0x7d2e06(0x150)]()[_0x7d2e06(0xaf)]=formatPrice(_0x2391f0[_0x7d2e06(0x125)]);const _0x57333c=_0x530d47[_0x7d2e06(0x150)]();_0x2391f0[_0x7d2e06(0x148)]?storage[_0x7d2e06(0x68)](_0x2391f0['image'])[_0x7d2e06(0xd8)]()[_0x7d2e06(0xfe)](()=>{const _0x360624=_0x7d2e06;return storage[_0x360624(0x68)](_0x2391f0[_0x360624(0x148)])[_0x360624(0x158)]();})[_0x7d2e06(0xfe)](_0x2bd922=>{const _0xf2f588=_0x7d2e06,_0x4dbfc7=document[_0xf2f588(0x82)](_0xf2f588(0x118));_0x4dbfc7['src']=_0x2bd922,_0x4dbfc7[_0xf2f588(0x99)]=_0xf2f588(0x9c),_0x4dbfc7[_0xf2f588(0x145)][_0xf2f588(0x6f)]=_0xf2f588(0xff),_0x4dbfc7[_0xf2f588(0x145)][_0xf2f588(0x141)]=_0xf2f588(0xff),_0x57333c[_0xf2f588(0xb0)](_0x4dbfc7),_0x4dbfc7[_0xf2f588(0x9f)]('click',function(){openImageModal(_0x2bd922);});})[_0x7d2e06(0x7c)](_0x1f634b=>{const _0x37fdb0=_0x7d2e06;console[_0x37fdb0(0x78)](_0x37fdb0(0x14d),_0x1f634b),_0x57333c[_0x37fdb0(0xaf)]=_0x37fdb0(0x10b);}):_0x57333c[_0x7d2e06(0xaf)]=_0x7d2e06(0xa7);const _0x372af9=_0x530d47['insertCell']();if(window[_0x7d2e06(0x129)]==='admin'){const _0x322aa3=document[_0x7d2e06(0x82)]('i');_0x322aa3['className']=_0x7d2e06(0xd9),_0x322aa3[_0x7d2e06(0x116)](_0x7d2e06(0x163),_0x19ffd4),_0x322aa3[_0x7d2e06(0x9f)](_0x7d2e06(0xe4),openEditForm),_0x372af9[_0x7d2e06(0xb0)](_0x322aa3);const _0x2483d6=document[_0x7d2e06(0x82)]('i');_0x2483d6[_0x7d2e06(0x111)]=_0x7d2e06(0x168),_0x2483d6['setAttribute']('data-key',_0x19ffd4),_0x2483d6[_0x7d2e06(0x9f)](_0x7d2e06(0xe4),deleteData),_0x372af9[_0x7d2e06(0xb0)](_0x2483d6);}}function addRowToReservationTable(_0x2175a1,_0x3c2d29,_0x4f7603=![]){const _0xf665f8=_0x2f0c2f,_0x4717db=document[_0xf665f8(0x154)](_0xf665f8(0x14c))['getElementsByTagName'](_0xf665f8(0x70))[0x0],_0x1868ad=_0x2175a1[_0xf665f8(0x13d)][_0xf665f8(0x9e)]('-');if(_0x1868ad[_0xf665f8(0x15b)]===0x3){const _0x8df435=parseInt(_0x1868ad[0x0],0xa),_0x484b24=parseInt(_0x1868ad[0x1],0xa)-0x1,_0x1cabb0=parseInt(_0x1868ad[0x2],0xa),_0x4abe75=new Date(_0x8df435,_0x484b24,_0x1cabb0),_0xde6919=_0x4abe75[_0xf665f8(0x94)](_0xf665f8(0x8e),{'month':_0xf665f8(0x75)})+'\x20'+_0x4abe75[_0xf665f8(0x13b)]();_0x4f7603?currentMonth!==_0xde6919&&(addMonthSeparator(_0x4717db,_0xde6919,_0x4f7603),currentMonth=_0xde6919):_0xde6919!==currentMonth&&(addMonthSeparator(_0x4717db,_0xde6919,_0x4f7603),currentMonth=_0xde6919);}else{console[_0xf665f8(0x78)](_0xf665f8(0x80)+_0x2175a1['date']);const _0xcf9434=_0x4717db[_0xf665f8(0x83)](_0x4f7603?0x0:null),_0x3901c3=_0xcf9434[_0xf665f8(0x150)]();_0x3901c3['colSpan']=0x9,_0x3901c3[_0xf665f8(0xaf)]=_0xf665f8(0x126)+_0x2175a1[_0xf665f8(0x13d)]+')',_0x3901c3['classList'][_0xf665f8(0x11c)]('error-row');return;}const _0x361fab=_0x4717db[_0xf665f8(0x83)](_0x4f7603?0x0:null);_0x361fab['setAttribute']('data-key',_0x3c2d29),_0x361fab[_0xf665f8(0x9f)](_0xf665f8(0xe4),function(){const _0x3d2712=_0xf665f8,_0x35b3f2=_0x4717db['querySelectorAll']('tr');_0x35b3f2[_0x3d2712(0xf8)](_0x479468=>_0x479468[_0x3d2712(0xbc)][_0x3d2712(0xf0)]('selected')),this[_0x3d2712(0xbc)]['add'](_0x3d2712(0x8d)),selectedReservationKey=_0x3c2d29;}),_0x361fab[_0xf665f8(0x150)]()[_0xf665f8(0xaf)]=_0x2175a1[_0xf665f8(0x13d)],_0x361fab[_0xf665f8(0x150)]()['textContent']=_0x2175a1[_0xf665f8(0xa3)],_0x361fab[_0xf665f8(0x150)]()['textContent']=_0x2175a1[_0xf665f8(0x6c)],_0x361fab[_0xf665f8(0x150)]()['textContent']=formatPrice(_0x2175a1[_0xf665f8(0x10e)]);const _0x9d905c=_0x2175a1['price']-_0x2175a1[_0xf665f8(0x10e)];_0x361fab['insertCell']()[_0xf665f8(0xaf)]=formatPrice(_0x9d905c),_0x361fab[_0xf665f8(0x150)]()[_0xf665f8(0xaf)]=formatPrice(_0x2175a1[_0xf665f8(0x125)]);const _0x53966c=_0x361fab[_0xf665f8(0x150)]();_0x2175a1[_0xf665f8(0x148)]?storage['ref'](_0x2175a1[_0xf665f8(0x148)])[_0xf665f8(0xd8)]()[_0xf665f8(0xfe)](()=>{const _0x424570=_0xf665f8;return storage[_0x424570(0x68)](_0x2175a1[_0x424570(0x148)])[_0x424570(0x158)]();})[_0xf665f8(0xfe)](_0xf96a64=>{const _0x5f4141=_0xf665f8,_0x36c5b1=document[_0x5f4141(0x82)]('img');_0x36c5b1['src']=_0xf96a64,_0x36c5b1[_0x5f4141(0x99)]='Image',_0x36c5b1[_0x5f4141(0x145)][_0x5f4141(0x6f)]=_0x5f4141(0xff),_0x36c5b1[_0x5f4141(0x145)][_0x5f4141(0x141)]=_0x5f4141(0xff),_0x53966c['appendChild'](_0x36c5b1),_0x36c5b1['addEventListener']('click',function(){openImageModal(_0xf96a64);});})[_0xf665f8(0x7c)](_0x48aa29=>{const _0x2b06a1=_0xf665f8;console[_0x2b06a1(0x78)](_0x2b06a1(0x14d),_0x48aa29),_0x53966c[_0x2b06a1(0xaf)]='Image\x20non\x20disponible';}):_0x53966c[_0xf665f8(0xaf)]=_0xf665f8(0xa7);_0x361fab[_0xf665f8(0x150)]()[_0xf665f8(0xaf)]=_0x2175a1['telephone'];const _0xc07ed3=_0x361fab[_0xf665f8(0x150)]();if(window[_0xf665f8(0x129)]===_0xf665f8(0x73)){const _0x2c6050=document['createElement'](_0xf665f8(0x6d));_0x2c6050[_0xf665f8(0xaf)]='Payer',_0x2c6050[_0xf665f8(0x9f)](_0xf665f8(0xe4),function(){openTrancheModal(_0x3c2d29,_0x2175a1);}),_0xc07ed3[_0xf665f8(0xb0)](_0x2c6050);const _0x39867c=document['createElement']('i');_0x39867c[_0xf665f8(0x111)]='fas\x20fa-edit\x20edit-icon',_0x39867c[_0xf665f8(0x116)](_0xf665f8(0x163),_0x3c2d29),_0x39867c[_0xf665f8(0x9f)](_0xf665f8(0xe4),openEditReservationForm),_0xc07ed3['appendChild'](_0x39867c);const _0x5826c8=document[_0xf665f8(0x82)]('i');_0x5826c8[_0xf665f8(0x111)]=_0xf665f8(0x168),_0x5826c8[_0xf665f8(0x116)](_0xf665f8(0x163),_0x3c2d29),_0x5826c8[_0xf665f8(0x9f)]('click',deleteData),_0xc07ed3[_0xf665f8(0xb0)](_0x5826c8);}}function addRowToRetourTable(_0x5d9193,_0x2843e2,_0x1d8a63=![]){const _0x3a2ed6=_0x2f0c2f,_0x2b2c8a=document[_0x3a2ed6(0x154)]('retourTable')[_0x3a2ed6(0x95)](_0x3a2ed6(0x70))[0x0],_0x517b48=_0x5d9193['date'][_0x3a2ed6(0x9e)]('-');if(_0x517b48['length']===0x3){const _0x350a1d=parseInt(_0x517b48[0x0],0xa),_0x3b1184=parseInt(_0x517b48[0x1],0xa)-0x1,_0x218aa3=parseInt(_0x517b48[0x2],0xa),_0x5b6caa=new Date(_0x350a1d,_0x3b1184,_0x218aa3),_0x2ec784=_0x5b6caa[_0x3a2ed6(0x94)](_0x3a2ed6(0x8e),{'month':'long'})+'\x20'+_0x5b6caa['getFullYear']();_0x1d8a63?currentMonth!==_0x2ec784&&(addMonthSeparator(_0x2b2c8a,_0x2ec784,_0x1d8a63),currentMonth=_0x2ec784):_0x2ec784!==currentMonth&&(addMonthSeparator(_0x2b2c8a,_0x2ec784,_0x1d8a63),currentMonth=_0x2ec784);}else{console[_0x3a2ed6(0x78)](_0x3a2ed6(0x80)+_0x5d9193[_0x3a2ed6(0x13d)]);const _0x5ef0a5=_0x2b2c8a[_0x3a2ed6(0x83)](_0x1d8a63?0x0:null),_0x1b76c7=_0x5ef0a5[_0x3a2ed6(0x150)]();_0x1b76c7['colSpan']=0x8,_0x1b76c7['textContent']=_0x3a2ed6(0x126)+_0x5d9193['date']+')',_0x1b76c7[_0x3a2ed6(0xbc)][_0x3a2ed6(0x11c)](_0x3a2ed6(0x10c));return;}const _0x26073d=_0x2b2c8a['insertRow'](_0x1d8a63?0x0:null);_0x26073d[_0x3a2ed6(0x116)](_0x3a2ed6(0x163),_0x2843e2),_0x26073d[_0x3a2ed6(0x150)]()[_0x3a2ed6(0xaf)]=_0x5d9193['date'],_0x26073d[_0x3a2ed6(0x150)]()[_0x3a2ed6(0xaf)]=_0x5d9193[_0x3a2ed6(0xa3)],_0x26073d[_0x3a2ed6(0x150)]()[_0x3a2ed6(0xaf)]=_0x5d9193[_0x3a2ed6(0x6c)],_0x26073d['insertCell']()['textContent']=formatPrice(_0x5d9193['montantAjoute']),_0x26073d[_0x3a2ed6(0x150)]()[_0x3a2ed6(0xaf)]=formatPrice(_0x5d9193[_0x3a2ed6(0x125)]);const _0x434ed8=_0x26073d[_0x3a2ed6(0x150)]();_0x5d9193[_0x3a2ed6(0x7a)]?storage['ref'](_0x5d9193[_0x3a2ed6(0x7a)])[_0x3a2ed6(0xd8)]()[_0x3a2ed6(0xfe)](()=>{const _0x5e3c7a=_0x3a2ed6;return storage[_0x5e3c7a(0x68)](_0x5d9193[_0x5e3c7a(0x7a)])[_0x5e3c7a(0x158)]();})[_0x3a2ed6(0xfe)](_0x411b7b=>{const _0x26a9ca=_0x3a2ed6,_0x381f5e=document['createElement'](_0x26a9ca(0x118));_0x381f5e[_0x26a9ca(0x146)]=_0x411b7b,_0x381f5e[_0x26a9ca(0x99)]=_0x26a9ca(0x114),_0x381f5e[_0x26a9ca(0x145)]['maxWidth']='100px',_0x381f5e[_0x26a9ca(0x145)]['maxHeight']=_0x26a9ca(0xff),_0x434ed8['appendChild'](_0x381f5e),_0x381f5e[_0x26a9ca(0x9f)]('click',function(){openImageModal(_0x411b7b);});})[_0x3a2ed6(0x7c)](_0x4497c7=>{const _0x3fdcaf=_0x3a2ed6;console[_0x3fdcaf(0x78)]('Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27ancienne\x20image:',_0x4497c7),_0x434ed8[_0x3fdcaf(0xaf)]=_0x3fdcaf(0x10b);}):_0x434ed8['textContent']=_0x3a2ed6(0xa7);const _0x48a499=_0x26073d[_0x3a2ed6(0x150)]();_0x5d9193[_0x3a2ed6(0x148)]?storage['ref'](_0x5d9193[_0x3a2ed6(0x148)])[_0x3a2ed6(0xd8)]()[_0x3a2ed6(0xfe)](()=>{const _0x590bcd=_0x3a2ed6;return storage[_0x590bcd(0x68)](_0x5d9193[_0x590bcd(0x148)])[_0x590bcd(0x158)]();})['then'](_0x2e116f=>{const _0x4bcb40=_0x3a2ed6,_0x555efa=document['createElement'](_0x4bcb40(0x118));_0x555efa[_0x4bcb40(0x146)]=_0x2e116f,_0x555efa[_0x4bcb40(0x99)]=_0x4bcb40(0x106),_0x555efa[_0x4bcb40(0x145)][_0x4bcb40(0x6f)]=_0x4bcb40(0xff),_0x555efa[_0x4bcb40(0x145)][_0x4bcb40(0x141)]='100px',_0x48a499[_0x4bcb40(0xb0)](_0x555efa),_0x555efa[_0x4bcb40(0x9f)](_0x4bcb40(0xe4),function(){openImageModal(_0x2e116f);});})['catch'](_0x5668f9=>{const _0x484262=_0x3a2ed6;console['error'](_0x484262(0x74),_0x5668f9),_0x48a499['textContent']='Image\x20non\x20disponible';}):_0x48a499[_0x3a2ed6(0xaf)]=_0x3a2ed6(0xa7);const _0xc565bb=_0x26073d[_0x3a2ed6(0x150)]();if(window[_0x3a2ed6(0x129)]===_0x3a2ed6(0x73)){const _0x123a46=document[_0x3a2ed6(0x82)]('i');_0x123a46[_0x3a2ed6(0x111)]='fas\x20fa-edit\x20edit-icon',_0x123a46[_0x3a2ed6(0x116)](_0x3a2ed6(0x163),_0x2843e2),_0x123a46[_0x3a2ed6(0x9f)](_0x3a2ed6(0xe4),openEditRetourForm),_0xc565bb[_0x3a2ed6(0xb0)](_0x123a46);const _0x4a6183=document[_0x3a2ed6(0x82)]('i');_0x4a6183[_0x3a2ed6(0x111)]=_0x3a2ed6(0x168),_0x4a6183['setAttribute']('data-key',_0x2843e2),_0x4a6183[_0x3a2ed6(0x9f)]('click',deleteData),_0xc565bb[_0x3a2ed6(0xb0)](_0x4a6183);}}function _0x358d(_0x15b798,_0x4edd2e){const _0x23ca66=_0x23ca();return _0x358d=function(_0x358dfa,_0x4783c5){_0x358dfa=_0x358dfa-0x68;let _0xba0785=_0x23ca66[_0x358dfa];return _0xba0785;},_0x358d(_0x15b798,_0x4edd2e);}function markReservationAsPaid(_0x2ccff1,_0xeab696){const _0x4d762e=_0x2f0c2f;_0xeab696[_0x4d762e(0x155)]=_0x4d762e(0xdf),database[_0x4d762e(0x68)]()[_0x4d762e(0x113)]()[_0x4d762e(0x13e)](_0xeab696)[_0x4d762e(0xfe)](()=>database[_0x4d762e(0x68)](_0x4d762e(0x10a)+_0x2ccff1)[_0x4d762e(0xf0)]())['then'](()=>{const _0x1077bf=_0x4d762e;deleteRowFromTable(_0x2ccff1,_0x1077bf(0x14c)),addRowToTable(_0xeab696,_0x2ccff1,'dataTable'),alert(_0x1077bf(0x8b));})[_0x4d762e(0x7c)](_0x12a137=>{const _0x31d234=_0x4d762e;console[_0x31d234(0x78)](_0x31d234(0x166),_0x12a137);});}function deleteRowFromTable(_0x34f29c,_0x4c253d){const _0xc70ba0=_0x2f0c2f,_0x191b92=document[_0xc70ba0(0xc3)]('#'+_0x4c253d+_0xc70ba0(0x139)+_0x34f29c+'\x22]');_0x191b92&&_0x191b92['remove']();}function addMonthSeparator(_0x1ff16f,_0x192325,_0x10faff=![]){const _0x4aabe8=_0x2f0c2f;if(currentMonth!==_0x192325){const _0x4deb0f=_0x1ff16f[_0x4aabe8(0x83)](_0x10faff?0x0:null),_0x17735d=_0x4deb0f['insertCell']();_0x17735d[_0x4aabe8(0x6e)]=_0x1ff16f[_0x4aabe8(0xf2)][0x0]['cells']['length'],_0x17735d['textContent']=_0x192325,_0x17735d['classList'][_0x4aabe8(0x11c)](_0x4aabe8(0xda)),currentMonth=_0x192325;}}function updateRowInTable(_0x301163,_0x208fed,_0x3057e7=_0x2f0c2f(0x160)){const _0x447dbd=_0x2f0c2f,_0x210e24=document[_0x447dbd(0xc3)]('#'+_0x3057e7+'\x20tr[data-key=\x22'+_0x208fed+'\x22]');if(_0x210e24){_0x210e24['cells'][0x0][_0x447dbd(0xaf)]=_0x301163[_0x447dbd(0x13d)];(_0x3057e7===_0x447dbd(0x160)||_0x3057e7===_0x447dbd(0x13a))&&(_0x210e24[_0x447dbd(0x167)][0x1][_0x447dbd(0xaf)]=_0x301163[_0x447dbd(0x155)]);_0x210e24[_0x447dbd(0x167)][0x2][_0x447dbd(0xaf)]=_0x301163[_0x447dbd(0x6c)],_0x210e24['cells'][0x3][_0x447dbd(0xaf)]=_0x301163[_0x447dbd(0xa3)];let _0x9c2ac7=0x4;if(_0x3057e7===_0x447dbd(0x14c)){_0x9c2ac7=0x5;const _0x229ac2=_0x301163[_0x447dbd(0x125)]-_0x301163[_0x447dbd(0x10e)];_0x210e24[_0x447dbd(0x167)][0x4]['textContent']=formatPrice(_0x229ac2);}_0x210e24['cells'][_0x9c2ac7][_0x447dbd(0xaf)]=formatPrice(_0x301163[_0x447dbd(0x125)]);let _0x172539=0x5;_0x3057e7==='reservationTable'&&(_0x172539=0x6,_0x210e24[_0x447dbd(0x167)][0x7][_0x447dbd(0xaf)]=_0x301163[_0x447dbd(0xd1)]);if(_0x301163['image']){const _0x5ab6ba=_0x210e24[_0x447dbd(0x167)][_0x172539];_0x5ab6ba[_0x447dbd(0xde)]='',storage[_0x447dbd(0x68)](_0x301163[_0x447dbd(0x148)])[_0x447dbd(0xd8)]()['then'](()=>{const _0x441b59=_0x447dbd;return storage['ref'](_0x301163[_0x441b59(0x148)])[_0x441b59(0x158)]();})[_0x447dbd(0xfe)](_0x56f952=>{const _0x11babc=_0x447dbd,_0x5ae025=document[_0x11babc(0x82)]('img');_0x5ae025['src']=_0x56f952,_0x5ae025[_0x11babc(0x99)]=_0x11babc(0x9c),_0x5ae025[_0x11babc(0x145)][_0x11babc(0x6f)]=_0x11babc(0xff),_0x5ae025['style'][_0x11babc(0x141)]=_0x11babc(0xff),_0x5ab6ba[_0x11babc(0xb0)](_0x5ae025),_0x5ae025[_0x11babc(0x9f)](_0x11babc(0xe4),function(){openImageModal(_0x56f952);});})[_0x447dbd(0x7c)](_0x36b805=>{const _0x43a5ce=_0x447dbd;console[_0x43a5ce(0x78)](_0x43a5ce(0x14d),_0x36b805),_0x5ab6ba[_0x43a5ce(0xaf)]='Image\x20non\x20disponible';});}if(_0x3057e7===_0x447dbd(0x13a)&&_0x301163[_0x447dbd(0x7a)]){const _0x2c0e0d=_0x210e24[_0x447dbd(0x167)][0x5];_0x2c0e0d['innerHTML']='',storage['ref'](_0x301163[_0x447dbd(0x7a)])[_0x447dbd(0xd8)]()[_0x447dbd(0xfe)](()=>{const _0x15dcd0=_0x447dbd;return storage[_0x15dcd0(0x68)](_0x301163['ancienneImage'])['getDownloadURL']();})['then'](_0x3f6113=>{const _0xcdf03=_0x447dbd,_0xdf991c=document[_0xcdf03(0x82)](_0xcdf03(0x118));_0xdf991c[_0xcdf03(0x146)]=_0x3f6113,_0xdf991c[_0xcdf03(0x99)]=_0xcdf03(0x114),_0xdf991c[_0xcdf03(0x145)]['maxWidth']=_0xcdf03(0xff),_0xdf991c[_0xcdf03(0x145)][_0xcdf03(0x141)]=_0xcdf03(0xff),_0x2c0e0d[_0xcdf03(0xb0)](_0xdf991c),_0xdf991c[_0xcdf03(0x9f)](_0xcdf03(0xe4),function(){openImageModal(_0x3f6113);});})[_0x447dbd(0x7c)](_0x2d5d82=>{const _0x407de0=_0x447dbd;console[_0x407de0(0x78)](_0x407de0(0x135),_0x2d5d82),_0x2c0e0d[_0x407de0(0xaf)]=_0x407de0(0x10b);});}if(_0x3057e7===_0x447dbd(0x14c)&&_0x210e24['cells']['length']===0x9){const _0x3753bb=_0x210e24[_0x447dbd(0x167)][0x8],_0x5772cf=_0x3753bb[_0x447dbd(0xc3)]('button');if(!_0x5772cf){const _0xf1826a=document['createElement']('button');_0xf1826a[_0x447dbd(0xaf)]='Payer',_0xf1826a[_0x447dbd(0x9f)](_0x447dbd(0xe4),function(){openTrancheModal(_0x208fed,_0x301163);}),_0x3753bb[_0x447dbd(0xb0)](_0xf1826a);}}}}function openEditForm(_0x2cf2e0){const _0x27a1d7=_0x2f0c2f;if(window[_0x27a1d7(0x129)]===_0x27a1d7(0x73)){const _0x4d2b85=_0x2cf2e0['target']['closest']('tr'),_0x3f7a2e=_0x4d2b85[_0x27a1d7(0x140)](_0x27a1d7(0x163)),_0x11ed0f=document[_0x27a1d7(0x154)](_0x27a1d7(0x144));_0x11ed0f[_0x27a1d7(0x145)]['display']=_0x27a1d7(0x165);let _0x1a146b=database[_0x27a1d7(0x68)](_0x3f7a2e),_0x351f1b='dataTable';const _0x2d6e5e=_0x4d2b85[_0x27a1d7(0x167)][0x0][_0x27a1d7(0xaf)],_0x23f5c6=_0x4d2b85[_0x27a1d7(0x167)][0x1][_0x27a1d7(0xaf)],_0x3c0e1e=_0x4d2b85[_0x27a1d7(0x167)][0x2]['textContent'],_0x74d750=_0x4d2b85[_0x27a1d7(0x167)][0x3][_0x27a1d7(0xaf)];let _0x551859=_0x4d2b85[_0x27a1d7(0x167)][0x4][_0x27a1d7(0xaf)];_0x551859=_0x551859[_0x27a1d7(0xe8)](_0x27a1d7(0xf5),'')[_0x27a1d7(0xe8)](/\s/g,''),_0x551859=parseFloat(_0x551859),document[_0x27a1d7(0x154)](_0x27a1d7(0x127))[_0x27a1d7(0xb8)]=_0x3f7a2e,document['getElementById'](_0x27a1d7(0x112))['value']=_0x2d6e5e,document[_0x27a1d7(0x154)](_0x27a1d7(0xb3))[_0x27a1d7(0xb8)]=_0x23f5c6,document[_0x27a1d7(0x154)]('editQuantity')[_0x27a1d7(0xb8)]=_0x3c0e1e,document[_0x27a1d7(0x154)](_0x27a1d7(0x15a))[_0x27a1d7(0xb8)]=_0x74d750,document['getElementById'](_0x27a1d7(0xf1))[_0x27a1d7(0xb8)]=_0x551859,document['getElementById'](_0x27a1d7(0xdb))['textContent']=formatPrice(_0x551859),database[_0x27a1d7(0x68)](_0x27a1d7(0x10a)+_0x3f7a2e)[_0x27a1d7(0x11a)](_0x27a1d7(0xb8))['then'](_0x4f0e9a=>{const _0x2e796e=_0x27a1d7;if(_0x4f0e9a[_0x2e796e(0xc5)]())_0x1a146b=database[_0x2e796e(0x68)](_0x2e796e(0x10a)+_0x3f7a2e),_0x351f1b=_0x2e796e(0x14c);else return database[_0x2e796e(0x68)](_0x2e796e(0xe0)+_0x3f7a2e)[_0x2e796e(0x11a)](_0x2e796e(0xb8))['then'](_0x43b762=>{const _0x512de6=_0x2e796e;_0x43b762[_0x512de6(0xc5)]()&&(_0x1a146b=database['ref'](_0x512de6(0xe0)+_0x3f7a2e),_0x351f1b=_0x512de6(0x13a));});return _0x1a146b['once']('value');})[_0x27a1d7(0xfe)](_0x4a06ef=>{const _0x37540b=_0x27a1d7,_0x53e8a8=_0x4a06ef['val']();if(_0x23f5c6===_0x37540b(0x7f))document[_0x37540b(0x154)]('editAdvanceAmount')['value']=_0x53e8a8['advance'],document['getElementById']('formattedEditAdvance')[_0x37540b(0xaf)]=formatPrice(_0x53e8a8[_0x37540b(0x10e)]),document[_0x37540b(0x154)](_0x37540b(0xf7))['value']=_0x53e8a8['telephone'],toggleAdvanceField(_0x37540b(0x12b));else _0x23f5c6===_0x37540b(0x117)?(document[_0x37540b(0x154)](_0x37540b(0x6a))[_0x37540b(0xb8)]=_0x53e8a8[_0x37540b(0x15f)],document[_0x37540b(0x154)](_0x37540b(0x130))['textContent']=formatPrice(_0x53e8a8['montantAjoute']),toggleAdvanceField(_0x37540b(0x12b))):(document[_0x37540b(0x154)](_0x37540b(0x12b))[_0x37540b(0x145)][_0x37540b(0xd6)]=_0x37540b(0x13f),document[_0x37540b(0x154)](_0x37540b(0xee))['style']['display']=_0x37540b(0x13f));}),document[_0x27a1d7(0x154)](_0x27a1d7(0x138))[_0x27a1d7(0x9f)](_0x27a1d7(0x81),function(_0x35cd7a){const _0x495d7a=_0x27a1d7;_0x35cd7a[_0x495d7a(0xdd)]();const _0x330982={'date':document[_0x495d7a(0x154)](_0x495d7a(0x112))[_0x495d7a(0xb8)],'saleType':document[_0x495d7a(0x154)](_0x495d7a(0xb3))[_0x495d7a(0xb8)],'quantity':document[_0x495d7a(0x154)](_0x495d7a(0xc4))[_0x495d7a(0xb8)],'designation':document['getElementById'](_0x495d7a(0x15a))['value'],'price':parseFloat(document['getElementById'](_0x495d7a(0xf1))[_0x495d7a(0xb8)]),'advance':document[_0x495d7a(0x154)]('editSaleType')[_0x495d7a(0xb8)]==='reservation'?parseFloat(document[_0x495d7a(0x154)]('editAdvanceAmount')['value']):0x0,'telephone':document[_0x495d7a(0x154)](_0x495d7a(0xb3))[_0x495d7a(0xb8)]==='reservation'?document[_0x495d7a(0x154)](_0x495d7a(0xf7))[_0x495d7a(0xb8)]:'','montantAjoute':document[_0x495d7a(0x154)](_0x495d7a(0xb3))[_0x495d7a(0xb8)]===_0x495d7a(0x117)?parseFloat(document[_0x495d7a(0x154)](_0x495d7a(0x6a))[_0x495d7a(0xb8)]):0x0};let _0x5212fc=database[_0x495d7a(0x68)](_0x3f7a2e);if(_0x330982[_0x495d7a(0x155)]===_0x495d7a(0x7f)&&_0x23f5c6!=='reservation')_0x5212fc=database[_0x495d7a(0x68)](_0x495d7a(0x10f))['push'](),database['ref'](_0x3f7a2e)[_0x495d7a(0xf0)]();else{if(_0x330982[_0x495d7a(0x155)]===_0x495d7a(0x117)&&_0x23f5c6!==_0x495d7a(0x117))_0x5212fc=database[_0x495d7a(0x68)](_0x495d7a(0x132))['push'](),database['ref'](_0x3f7a2e)['remove']();else{if(_0x330982[_0x495d7a(0x155)]!==_0x495d7a(0x7f)&&_0x23f5c6==='reservation')_0x5212fc=database[_0x495d7a(0x68)]()['push'](),database[_0x495d7a(0x68)](_0x495d7a(0x10a)+_0x3f7a2e)[_0x495d7a(0xf0)]();else _0x330982[_0x495d7a(0x155)]!=='retour'&&_0x23f5c6==='retour'&&(_0x5212fc=database[_0x495d7a(0x68)]()[_0x495d7a(0x113)](),database[_0x495d7a(0x68)](_0x495d7a(0xe0)+_0x3f7a2e)[_0x495d7a(0xf0)]());}}_0x5212fc[_0x495d7a(0xe9)](_0x330982)[_0x495d7a(0xfe)](()=>{const _0x494db3=_0x495d7a,_0x490ef9=document[_0x494db3(0x154)](_0x494db3(0xfa))['files'][0x0],_0x4ef59b=document[_0x494db3(0x154)]('editSaleType')[_0x494db3(0xb8)]==='retour'?document[_0x494db3(0x154)](_0x494db3(0x14a))[_0x494db3(0x14b)][0x0]:null,_0x22a413=[];if(_0x490ef9){const _0x289bbf=storage[_0x494db3(0x68)]()[_0x494db3(0x72)](_0x494db3(0x90)+_0x5212fc['key']+_0x494db3(0xc0));_0x22a413[_0x494db3(0x113)](_0x289bbf[_0x494db3(0x101)](_0x490ef9)[_0x494db3(0xfe)](_0xa435e7=>{const _0x5d5a4a=_0x494db3;return _0x5212fc['update']({'image':_0xa435e7[_0x5d5a4a(0x68)][_0x5d5a4a(0x133)]});}));}if(_0x4ef59b){const _0x4ffcf4=storage[_0x494db3(0x68)]()[_0x494db3(0x72)](_0x494db3(0x90)+_0x5212fc[_0x494db3(0x98)]+_0x494db3(0xb4));_0x22a413[_0x494db3(0x113)](_0x4ffcf4[_0x494db3(0x101)](_0x4ef59b)[_0x494db3(0xfe)](_0x1818b9=>{const _0x17a746=_0x494db3;return _0x5212fc[_0x17a746(0xe9)]({'ancienneImage':ancienneSnapshot[_0x17a746(0x68)][_0x17a746(0x133)]});}));}return Promise[_0x494db3(0x136)](_0x22a413);})['then'](()=>{const _0x1b8b5d=_0x495d7a;closeModal(_0x1b8b5d(0x144)),alert('Les\x20données\x20ont\x20été\x20mises\x20à\x20jour\x20avec\x20succès.'),clearTable(),loadDataFromDatabase();const _0x480592=_0x330982[_0x1b8b5d(0x155)]===_0x1b8b5d(0x7f)?_0x1b8b5d(0xb6):_0x330982[_0x1b8b5d(0x155)]===_0x1b8b5d(0x117)?_0x1b8b5d(0x84):_0x1b8b5d(0xf4);document[_0x1b8b5d(0x154)](_0x480592)[_0x1b8b5d(0x145)][_0x1b8b5d(0xd6)]='block';const _0x2b7831=['tableContainer',_0x1b8b5d(0xb6),_0x1b8b5d(0x84)]['filter'](_0x4bae3e=>_0x4bae3e!==_0x480592);_0x2b7831['forEach'](_0x5c9eb0=>document[_0x1b8b5d(0x154)](_0x5c9eb0)[_0x1b8b5d(0x145)][_0x1b8b5d(0xd6)]=_0x1b8b5d(0x13f)),document['getElementById'](_0x480592)[_0x1b8b5d(0xef)]({'behavior':'smooth'});})[_0x495d7a(0x7c)](_0x2e4af9=>{const _0x5f2e29=_0x495d7a;console['error'](_0x5f2e29(0x15c),_0x2e4af9);});});}else alert(_0x27a1d7(0xed));}function openEditReservationForm(_0x408477){const _0x2f8766=_0x2f0c2f;if(window[_0x2f8766(0x129)]===_0x2f8766(0x73)){const _0xdcdbf8=_0x408477[_0x2f8766(0xeb)][_0x2f8766(0x7d)]('tr'),_0x189832=_0xdcdbf8[_0x2f8766(0x140)](_0x2f8766(0x163)),_0x4032df=document[_0x2f8766(0x154)](_0x2f8766(0xe6));_0x4032df[_0x2f8766(0x145)][_0x2f8766(0xd6)]='block';const _0x4cc22e=_0xdcdbf8['cells'][0x0][_0x2f8766(0xaf)],_0x5bd38e=_0xdcdbf8[_0x2f8766(0x167)][0x1][_0x2f8766(0xaf)],_0x20f244=_0xdcdbf8['cells'][0x2][_0x2f8766(0xaf)];let _0x9c8e40=_0xdcdbf8[_0x2f8766(0x167)][0x3][_0x2f8766(0xaf)],_0x8e37dc=_0xdcdbf8[_0x2f8766(0x167)][0x5][_0x2f8766(0xaf)];const _0x48520c=_0xdcdbf8[_0x2f8766(0x167)][0x7][_0x2f8766(0xaf)];_0x8e37dc=_0x8e37dc[_0x2f8766(0xe8)](_0x2f8766(0xf5),'')['replace'](/\s/g,''),_0x9c8e40=_0x9c8e40[_0x2f8766(0xe8)](_0x2f8766(0xf5),'')[_0x2f8766(0xe8)](/\s/g,''),_0x8e37dc=parseFloat(_0x8e37dc),_0x9c8e40=parseFloat(_0x9c8e40),document[_0x2f8766(0x154)](_0x2f8766(0x8a))['value']=_0x189832,document['getElementById']('editReservationDate')[_0x2f8766(0xb8)]=_0x4cc22e,document['getElementById']('editReservationQuantity')[_0x2f8766(0xb8)]=_0x20f244,document[_0x2f8766(0x154)](_0x2f8766(0x12f))[_0x2f8766(0xb8)]=_0x8e37dc,document['getElementById'](_0x2f8766(0xc1))[_0x2f8766(0xaf)]=formatPrice(_0x8e37dc),document['getElementById'](_0x2f8766(0xd7))['value']=_0x5bd38e,document[_0x2f8766(0x154)]('editReservationAdvanceAmount')[_0x2f8766(0xb8)]=_0x9c8e40,document[_0x2f8766(0x154)](_0x2f8766(0x16b))[_0x2f8766(0xaf)]=formatPrice(_0x9c8e40),document[_0x2f8766(0x154)](_0x2f8766(0x162))[_0x2f8766(0xb8)]=_0x48520c,document[_0x2f8766(0x154)](_0x2f8766(0xe2))[_0x2f8766(0x9f)]('submit',function(_0x3d433c){const _0x42ff7a=_0x2f8766;_0x3d433c['preventDefault']();const _0x30c1a1=document[_0x42ff7a(0x154)](_0x42ff7a(0x8a))[_0x42ff7a(0xb8)],_0x40a202=document[_0x42ff7a(0x154)](_0x42ff7a(0x12c))['value'],_0x1c0c87=document[_0x42ff7a(0x154)](_0x42ff7a(0x115))[_0x42ff7a(0xb8)],_0x5a1b84=parseFloat(document[_0x42ff7a(0x154)](_0x42ff7a(0x12f))['value'][_0x42ff7a(0xe8)](/\sF CFA$/,'')[_0x42ff7a(0xe8)](/\s/g,'')),_0x202ecc=document['getElementById'](_0x42ff7a(0xd7))[_0x42ff7a(0xb8)],_0x55345e=parseFloat(document[_0x42ff7a(0x154)]('editReservationAdvanceAmount')[_0x42ff7a(0xb8)]),_0x5b16c0=document[_0x42ff7a(0x154)]('editReservationTelephone')[_0x42ff7a(0xb8)],_0x3a33e1=document['getElementById']('editReservationImage')[_0x42ff7a(0x14b)][0x0],_0x138bf1={'date':_0x40a202,'saleType':'reservation','quantity':_0x1c0c87,'designation':_0x202ecc,'price':_0x5a1b84,'advance':_0x55345e,'telephone':_0x5b16c0};database[_0x42ff7a(0x68)]('reservations/'+_0x30c1a1)[_0x42ff7a(0xe9)](_0x138bf1)[_0x42ff7a(0xfe)](()=>{const _0x1b3c48=_0x42ff7a;if(_0x3a33e1){const _0x21b724=storage[_0x1b3c48(0x68)]()[_0x1b3c48(0x72)](_0x1b3c48(0x90)+_0x30c1a1+'.jpg');return _0x21b724[_0x1b3c48(0x101)](_0x3a33e1)['then'](_0x18317b=>{const _0x21acb0=_0x1b3c48;return database[_0x21acb0(0x68)]('reservations/'+_0x30c1a1)[_0x21acb0(0xe9)]({'image':_0x18317b['ref'][_0x21acb0(0x133)]});});}})['then'](()=>{const _0x38d432=_0x42ff7a;closeModal(_0x38d432(0xe6)),alert(_0x38d432(0xc8)),clearTable(),loadDataFromDatabase(),document[_0x38d432(0x154)]('reservationsContainer')[_0x38d432(0x145)][_0x38d432(0xd6)]=_0x38d432(0x165);const _0x57c97a=[_0x38d432(0xf4),'retoursContainer'];_0x57c97a['forEach'](_0x97f9e3=>document[_0x38d432(0x154)](_0x97f9e3)[_0x38d432(0x145)][_0x38d432(0xd6)]='none'),document[_0x38d432(0x154)](_0x38d432(0xb6))[_0x38d432(0xef)]({'behavior':_0x38d432(0xd5)});})['catch'](_0x339ab7=>{const _0xbd742=_0x42ff7a;console[_0xbd742(0x78)](_0xbd742(0x137),_0x339ab7);});});}else alert(_0x2f8766(0xed));}function openEditRetourForm(_0x516357){const _0x599330=_0x2f0c2f;if(window[_0x599330(0x129)]===_0x599330(0x73)){const _0x4db6aa=_0x516357['target'][_0x599330(0x7d)]('tr'),_0x36c72a=_0x4db6aa[_0x599330(0x140)]('data-key'),_0x249db6=document['getElementById'](_0x599330(0x8f));_0x249db6[_0x599330(0x145)][_0x599330(0xd6)]='block';const _0x267940=_0x4db6aa['cells'][0x0][_0x599330(0xaf)],_0x2eee0b=_0x4db6aa['cells'][0x1][_0x599330(0xaf)],_0x45e91d=_0x4db6aa[_0x599330(0x167)][0x2][_0x599330(0xaf)];let _0x253e2d=_0x4db6aa['cells'][0x3][_0x599330(0xaf)],_0x1f53f3=_0x4db6aa[_0x599330(0x167)][0x4]['textContent'];_0x1f53f3=_0x1f53f3[_0x599330(0xe8)](_0x599330(0xf5),'')[_0x599330(0xe8)](/\s/g,''),_0x253e2d=_0x253e2d[_0x599330(0xe8)](_0x599330(0xf5),'')[_0x599330(0xe8)](/\s/g,''),_0x1f53f3=parseFloat(_0x1f53f3),_0x253e2d=parseFloat(_0x253e2d),document[_0x599330(0x154)](_0x599330(0x6b))[_0x599330(0xb8)]=_0x36c72a,document['getElementById'](_0x599330(0x110))[_0x599330(0xb8)]=_0x267940,document['getElementById'](_0x599330(0xe3))['value']=_0x45e91d,document[_0x599330(0x154)](_0x599330(0xe5))[_0x599330(0xb8)]=_0x1f53f3,document['getElementById'](_0x599330(0x11e))[_0x599330(0xaf)]=formatPrice(_0x1f53f3),document['getElementById'](_0x599330(0xfd))[_0x599330(0xb8)]=_0x2eee0b,document[_0x599330(0x154)](_0x599330(0x152))[_0x599330(0xb8)]=_0x253e2d,document[_0x599330(0x154)](_0x599330(0x9b))[_0x599330(0xaf)]=formatPrice(_0x253e2d),document[_0x599330(0x154)]('editRetourForm')[_0x599330(0x9f)](_0x599330(0x81),function(_0x58947a){const _0x551ab1=_0x599330;_0x58947a['preventDefault']();const _0x4d6d23=document[_0x551ab1(0x154)](_0x551ab1(0x6b))[_0x551ab1(0xb8)],_0x2690d2=document[_0x551ab1(0x154)](_0x551ab1(0x110))[_0x551ab1(0xb8)],_0x4dd718=document[_0x551ab1(0x154)](_0x551ab1(0xe3))[_0x551ab1(0xb8)],_0x310927=parseFloat(document[_0x551ab1(0x154)](_0x551ab1(0xe5))[_0x551ab1(0xb8)][_0x551ab1(0xe8)](/\sF CFA$/,'')[_0x551ab1(0xe8)](/\s/g,'')),_0x5ba166=document[_0x551ab1(0x154)](_0x551ab1(0xfd))['value'],_0x59b1a5=parseFloat(document[_0x551ab1(0x154)](_0x551ab1(0x152))[_0x551ab1(0xb8)]),_0x4bc44e=document[_0x551ab1(0x154)](_0x551ab1(0x143))[_0x551ab1(0x14b)][0x0],_0x46ecbf=document['getElementById'](_0x551ab1(0x164))['files'][0x0],_0x241614={'date':_0x2690d2,'saleType':_0x551ab1(0x117),'quantity':_0x4dd718,'designation':_0x5ba166,'price':_0x310927,'montantAjoute':_0x59b1a5};database[_0x551ab1(0x68)]('retours/'+_0x4d6d23)[_0x551ab1(0xe9)](_0x241614)[_0x551ab1(0xfe)](()=>{const _0x53f4d3=_0x551ab1;if(_0x4bc44e&&_0x46ecbf){const _0x51cf7d=storage[_0x53f4d3(0x68)]()[_0x53f4d3(0x72)](_0x53f4d3(0x90)+_0x4d6d23+'_nouvelle.jpg'),_0x155f3f=storage[_0x53f4d3(0x68)]()[_0x53f4d3(0x72)](_0x53f4d3(0x90)+_0x4d6d23+_0x53f4d3(0xb4));return Promise[_0x53f4d3(0x136)]([_0x51cf7d[_0x53f4d3(0x101)](_0x4bc44e),_0x155f3f[_0x53f4d3(0x101)](_0x46ecbf)])['then'](([_0x133ef9,_0x1cd619])=>{const _0x5e7b1f=_0x53f4d3;return database['ref'](_0x5e7b1f(0xe0)+_0x4d6d23)[_0x5e7b1f(0xe9)]({'image':_0x133ef9[_0x5e7b1f(0x68)][_0x5e7b1f(0x133)],'ancienneImage':_0x1cd619[_0x5e7b1f(0x68)][_0x5e7b1f(0x133)]});});}else{if(_0x4bc44e){const _0x3f1878=storage[_0x53f4d3(0x68)]()[_0x53f4d3(0x72)]('images/'+_0x4d6d23+'_nouvelle.jpg');return _0x3f1878[_0x53f4d3(0x101)](_0x4bc44e)['then'](_0x438171=>{const _0x4ace74=_0x53f4d3;return database[_0x4ace74(0x68)](_0x4ace74(0xe0)+_0x4d6d23)[_0x4ace74(0xe9)]({'image':_0x438171['ref'][_0x4ace74(0x133)]});});}else{if(_0x46ecbf){const _0x353c98=storage[_0x53f4d3(0x68)]()['child'](_0x53f4d3(0x90)+_0x4d6d23+_0x53f4d3(0xb4));return _0x353c98[_0x53f4d3(0x101)](_0x46ecbf)[_0x53f4d3(0xfe)](_0x1846a4=>{const _0x279a7c=_0x53f4d3;return database[_0x279a7c(0x68)](_0x279a7c(0xe0)+_0x4d6d23)[_0x279a7c(0xe9)]({'ancienneImage':ancienneSnapshot['ref']['fullPath']});});}}}})[_0x551ab1(0xfe)](()=>{const _0x9600ce=_0x551ab1;closeModal('editRetourModal'),alert(_0x9600ce(0xc6)),clearTable(),loadDataFromDatabase(),document[_0x9600ce(0x154)](_0x9600ce(0x84))[_0x9600ce(0x145)][_0x9600ce(0xd6)]='block';const _0x52f23c=['tableContainer','reservationsContainer'];_0x52f23c[_0x9600ce(0xf8)](_0x5d3345=>document[_0x9600ce(0x154)](_0x5d3345)[_0x9600ce(0x145)][_0x9600ce(0xd6)]=_0x9600ce(0x13f)),document[_0x9600ce(0x154)]('retoursContainer')[_0x9600ce(0xef)]({'behavior':_0x9600ce(0xd5)});})[_0x551ab1(0x7c)](_0x51bbdf=>{const _0x1f1df5=_0x551ab1;console[_0x1f1df5(0x78)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20du\x20retour\x20:',_0x51bbdf);});});}else alert('Vous\x20n\x27êtes\x20pas\x20autorisé\x20à\x20modifier\x20les\x20données.');}function deleteData(_0x41f728){const _0x55f2cc=_0x2f0c2f;if(window['loggedInUserStatus']===_0x55f2cc(0x73)){const _0x561869=_0x41f728['target']['getAttribute'](_0x55f2cc(0x163)),_0xeef2be=_0x41f728[_0x55f2cc(0xeb)][_0x55f2cc(0x7d)]('tr'),_0x3698f7=_0xeef2be[_0x55f2cc(0xa1)][_0x55f2cc(0xa1)]['id'];if(confirm(_0x55f2cc(0xf6))){let _0x374e5e=database[_0x55f2cc(0x68)](_0x561869);if(_0x3698f7===_0x55f2cc(0x14c))_0x374e5e=database[_0x55f2cc(0x68)](_0x55f2cc(0x10a)+_0x561869);else _0x3698f7===_0x55f2cc(0x13a)&&(_0x374e5e=database['ref'](_0x55f2cc(0xe0)+_0x561869));_0x374e5e['remove']()[_0x55f2cc(0xfe)](()=>{const _0x2e6614=_0x55f2cc,_0x415b12=storage[_0x2e6614(0x68)]('images/'+_0x561869+_0x2e6614(0xc0));return _0x415b12['delete']()[_0x2e6614(0x7c)](_0x2bb10a=>{const _0x4363a5=_0x2e6614;if(_0x2bb10a[_0x4363a5(0x76)]!==_0x4363a5(0x10d))throw _0x2bb10a;});})[_0x55f2cc(0xfe)](()=>{const _0xa1bda0=_0x55f2cc;alert(_0xa1bda0(0x123)),_0xeef2be[_0xa1bda0(0xf0)]();})['catch'](_0x2d7b81=>{const _0x3838c3=_0x55f2cc;console['error'](_0x3838c3(0xab),_0x2d7b81);});}}else alert(_0x55f2cc(0xca));}function toggleTable(){const _0x71e903=_0x2f0c2f,_0x783d1c=document[_0x71e903(0x154)](_0x71e903(0xf4));_0x783d1c[_0x71e903(0x145)][_0x71e903(0xd6)]=_0x783d1c[_0x71e903(0x145)]['display']==='none'?_0x71e903(0x165):_0x71e903(0x13f),document[_0x71e903(0x154)]('reservationsContainer')[_0x71e903(0x145)]['display']=_0x71e903(0x13f),document['getElementById']('retoursContainer')[_0x71e903(0x145)][_0x71e903(0xd6)]=_0x71e903(0x13f);}function toggleReservationsTable(){const _0x5e2448=_0x2f0c2f,_0x4465fb=document[_0x5e2448(0x154)](_0x5e2448(0xb6));_0x4465fb['style'][_0x5e2448(0xd6)]=_0x4465fb[_0x5e2448(0x145)][_0x5e2448(0xd6)]==='none'?_0x5e2448(0x165):'none',document[_0x5e2448(0x154)](_0x5e2448(0xf4))['style']['display']=_0x5e2448(0x13f),document['getElementById'](_0x5e2448(0x84))[_0x5e2448(0x145)]['display']='none';}function toggleRetoursTable(){const _0x4a74bd=_0x2f0c2f,_0x4500c9=document[_0x4a74bd(0x154)]('retoursContainer');_0x4500c9['style'][_0x4a74bd(0xd6)]=_0x4500c9[_0x4a74bd(0x145)][_0x4a74bd(0xd6)]===_0x4a74bd(0x13f)?_0x4a74bd(0x165):_0x4a74bd(0x13f),document[_0x4a74bd(0x154)](_0x4a74bd(0xf4))['style'][_0x4a74bd(0xd6)]=_0x4a74bd(0x13f),document[_0x4a74bd(0x154)](_0x4a74bd(0xb6))[_0x4a74bd(0x145)][_0x4a74bd(0xd6)]=_0x4a74bd(0x13f);}document[_0x2f0c2f(0x154)](_0x2f0c2f(0xbe))[_0x2f0c2f(0x9f)](_0x2f0c2f(0xe4),function(){const _0x52ef2c=_0x2f0c2f;toggleTable(),clearTable(),loadDataFromDatabase(),document['getElementById'](_0x52ef2c(0xf4))[_0x52ef2c(0xef)]({'behavior':_0x52ef2c(0xd5),'block':_0x52ef2c(0xc9)});}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0xa8))['addEventListener'](_0x2f0c2f(0xe4),function(){const _0x37c2d6=_0x2f0c2f;toggleReservationsTable(),clearTable(),loadDataFromDatabase(),document['getElementById'](_0x37c2d6(0xb6))[_0x37c2d6(0xef)]({'behavior':_0x37c2d6(0xd5),'block':_0x37c2d6(0xc9)});}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0xa2))[_0x2f0c2f(0x9f)](_0x2f0c2f(0xe4),function(){const _0x4131c4=_0x2f0c2f;toggleRetoursTable(),clearTable(),loadDataFromDatabase(),document[_0x4131c4(0x154)](_0x4131c4(0x84))['scrollIntoView']({'behavior':_0x4131c4(0xd5),'block':_0x4131c4(0xc9)});});function closeModal(_0x16598b){const _0x559bd4=_0x2f0c2f,_0x5467fe=document['getElementById'](_0x16598b);_0x5467fe['style'][_0x559bd4(0xd6)]='none';if(_0x16598b===_0x559bd4(0xb9))document[_0x559bd4(0x154)](_0x559bd4(0x103))['reset'](),document['getElementById'](_0x559bd4(0x97))[_0x559bd4(0xaf)]=_0x559bd4(0xf5);else{if(_0x16598b===_0x559bd4(0x144))document['getElementById'](_0x559bd4(0x138))[_0x559bd4(0xea)](),document['getElementById'](_0x559bd4(0xdb))[_0x559bd4(0xaf)]=_0x559bd4(0xf5),document[_0x559bd4(0x154)]('formattedEditAdvance')[_0x559bd4(0xaf)]='\x20F\x20CFA',document['getElementById'](_0x559bd4(0x130))[_0x559bd4(0xaf)]=_0x559bd4(0xf5);else{if(_0x16598b===_0x559bd4(0xb5))document['getElementById']('trancheForm')[_0x559bd4(0xea)](),document[_0x559bd4(0x154)]('formattedTrancheAmount')[_0x559bd4(0xaf)]=_0x559bd4(0xf5);else{if(_0x16598b===_0x559bd4(0xe6))document[_0x559bd4(0x154)](_0x559bd4(0xe2))['reset'](),document[_0x559bd4(0x154)](_0x559bd4(0xc1))[_0x559bd4(0xaf)]=_0x559bd4(0xf5),document[_0x559bd4(0x154)](_0x559bd4(0x16b))['textContent']=_0x559bd4(0xf5);else _0x16598b===_0x559bd4(0x8f)&&(document[_0x559bd4(0x154)]('editRetourForm')[_0x559bd4(0xea)](),document['getElementById']('editRetourFormattedPrice')[_0x559bd4(0xaf)]=_0x559bd4(0xf5),document[_0x559bd4(0x154)]('editRetourFormattedMontantAjoute')[_0x559bd4(0xaf)]=_0x559bd4(0xf5));}}}}function clearTable(){const _0x4af9bd=_0x2f0c2f,_0x758171=document['getElementById'](_0x4af9bd(0x160))[_0x4af9bd(0x95)](_0x4af9bd(0x70))[0x0];_0x758171[_0x4af9bd(0xde)]='';const _0x33e3b4=document['getElementById'](_0x4af9bd(0x14c))['getElementsByTagName'](_0x4af9bd(0x70))[0x0];_0x33e3b4[_0x4af9bd(0xde)]='';const _0x5ef663=document[_0x4af9bd(0x154)](_0x4af9bd(0x13a))['getElementsByTagName']('tbody')[0x0];_0x5ef663['innerHTML']='',currentMonth=null;}function openImageModal(_0x43f978){const _0x1f1a35=_0x2f0c2f,_0x28d2c5=document[_0x1f1a35(0x82)](_0x1f1a35(0x134));_0x28d2c5['classList']['add'](_0x1f1a35(0x88));const _0x37af54=document[_0x1f1a35(0x82)](_0x1f1a35(0x118));_0x37af54['src']=_0x43f978,_0x37af54[_0x1f1a35(0x99)]=_0x1f1a35(0x107),_0x28d2c5['addEventListener'](_0x1f1a35(0xe4),function(_0xa18888){const _0x2ca769=_0x1f1a35;_0xa18888[_0x2ca769(0xeb)]===_0x28d2c5&&document[_0x2ca769(0xd2)]['removeChild'](_0x28d2c5);});const _0x327478=document[_0x1f1a35(0x82)](_0x1f1a35(0x15e));_0x327478[_0x1f1a35(0xbc)][_0x1f1a35(0x11c)](_0x1f1a35(0x16a)),_0x327478['textContent']='×',_0x327478[_0x1f1a35(0x9f)](_0x1f1a35(0xe4),function(){const _0x16c9fe=_0x1f1a35;document[_0x16c9fe(0xd2)][_0x16c9fe(0x157)](_0x28d2c5);}),_0x28d2c5[_0x1f1a35(0xb0)](_0x37af54),_0x28d2c5[_0x1f1a35(0xb0)](_0x327478),document[_0x1f1a35(0xd2)][_0x1f1a35(0xb0)](_0x28d2c5);}function openTrancheModal(_0x7e859e,_0x58c5ed){const _0xe575d=_0x2f0c2f,_0x4faeaa=document[_0xe575d(0x154)]('trancheModal');_0x4faeaa[_0xe575d(0x145)]['display']='block',document[_0xe575d(0x154)](_0xe575d(0xad))[_0xe575d(0xaf)]=_0x58c5ed[_0xe575d(0xa3)],document['getElementById']('trancheModalQuantity')['textContent']=_0x58c5ed[_0xe575d(0x6c)],document[_0xe575d(0x154)](_0xe575d(0xd0))[_0xe575d(0xaf)]=formatPrice(_0x58c5ed[_0xe575d(0x125)]),document[_0xe575d(0x154)](_0xe575d(0xac))[_0xe575d(0xaf)]=formatPrice(_0x58c5ed[_0xe575d(0x10e)]),document[_0xe575d(0x154)](_0xe575d(0xe7))[_0xe575d(0x9f)](_0xe575d(0x91),function(){const _0x514fa5=_0xe575d,_0x4492df=parseFloat(this[_0x514fa5(0xb8)]);!isNaN(_0x4492df)?document['getElementById'](_0x514fa5(0xcb))[_0x514fa5(0xaf)]=formatPrice(_0x4492df):document['getElementById'](_0x514fa5(0xcb))[_0x514fa5(0xaf)]=_0x514fa5(0xf5);}),document[_0xe575d(0x154)](_0xe575d(0x156))['addEventListener'](_0xe575d(0x81),function(_0x52807c){const _0xdf6f14=_0xe575d;_0x52807c[_0xdf6f14(0xdd)](),payerTranche(_0x7e859e,_0x58c5ed);});}function payerTranche(_0x5d6860,_0x6e8dc3){const _0x591242=_0x2f0c2f,_0x4116ba=parseFloat(document[_0x591242(0x154)](_0x591242(0xe7))['value']);if(isNaN(_0x4116ba)){alert(_0x591242(0x169));return;}const _0x850665=_0x6e8dc3[_0x591242(0x10e)]+_0x4116ba;database[_0x591242(0x68)](_0x591242(0x10a)+_0x5d6860)[_0x591242(0xe9)]({'advance':_0x850665})[_0x591242(0xfe)](()=>{const _0x38730c=_0x591242;closeModal(_0x38730c(0xb5)),clearTable(),loadDataFromDatabase(),alert(_0x38730c(0x102)+formatPrice(_0x850665)),document['getElementById']('reservationsContainer')['style'][_0x38730c(0xd6)]='block';const _0x29524a=[_0x38730c(0xf4),_0x38730c(0x84)];_0x29524a[_0x38730c(0xf8)](_0x23968e=>document[_0x38730c(0x154)](_0x23968e)[_0x38730c(0x145)]['display']=_0x38730c(0x13f)),document['getElementById'](_0x38730c(0xb6))[_0x38730c(0xef)]({'behavior':'smooth'});})[_0x591242(0x7c)](_0x22a63c=>{const _0x288b93=_0x591242;console['error'](_0x288b93(0xa6),_0x22a63c);});}function payerTotal(){const _0xd9bd01=_0x2f0c2f;if(!selectedReservationKey){alert(_0xd9bd01(0xb1));return;}database['ref'](_0xd9bd01(0x10a)+selectedReservationKey)[_0xd9bd01(0x11a)](_0xd9bd01(0xb8))[_0xd9bd01(0xfe)](_0x44b70a=>{const _0x2ca12a=_0xd9bd01,_0x479b21=_0x44b70a[_0x2ca12a(0xcc)]();return _0x479b21[_0x2ca12a(0x155)]='vente',database[_0x2ca12a(0x68)]()[_0x2ca12a(0x113)]()[_0x2ca12a(0x13e)](_0x479b21);})[_0xd9bd01(0xfe)](()=>database[_0xd9bd01(0x68)](_0xd9bd01(0x10a)+selectedReservationKey)[_0xd9bd01(0xf0)]())[_0xd9bd01(0xfe)](()=>{const _0x2b25db=_0xd9bd01;closeModal('trancheModal'),clearTable(),loadDataFromDatabase(),alert(_0x2b25db(0x119)),selectedReservationKey=null,document[_0x2b25db(0x154)](_0x2b25db(0xf4))[_0x2b25db(0x145)]['display']='block';const _0x120267=[_0x2b25db(0xb6),'retoursContainer'];_0x120267[_0x2b25db(0xf8)](_0x3d58a8=>document[_0x2b25db(0x154)](_0x3d58a8)[_0x2b25db(0x145)][_0x2b25db(0xd6)]=_0x2b25db(0x13f)),document[_0x2b25db(0x154)](_0x2b25db(0xf4))[_0x2b25db(0xef)]({'behavior':_0x2b25db(0xd5)});})[_0xd9bd01(0x7c)](_0x5067b2=>{const _0x3ffb26=_0xd9bd01;console[_0x3ffb26(0x78)](_0x3ffb26(0xbb),_0x5067b2);});}function addMonthSeparator(_0x431bf2,_0x4c7071,_0x1e286d=![]){const _0x2fafb2=_0x2f0c2f;if(currentMonth!==_0x4c7071){const _0x34584e=_0x431bf2[_0x2fafb2(0x83)](_0x1e286d?0x0:null),_0x4a799d=_0x34584e[_0x2fafb2(0x150)]();_0x4a799d[_0x2fafb2(0x6e)]=_0x431bf2[_0x2fafb2(0xf2)][0x0]['cells'][_0x2fafb2(0x15b)],_0x4a799d['textContent']=_0x4c7071,_0x4a799d[_0x2fafb2(0xbc)][_0x2fafb2(0x11c)](_0x2fafb2(0xda)),currentMonth=_0x4c7071;}}document[_0x2f0c2f(0x154)](_0x2f0c2f(0x125))[_0x2f0c2f(0x9f)](_0x2f0c2f(0x91),function(){const _0x2e7e73=_0x2f0c2f,_0x15dcd9=this,_0x49b43e=parseFloat(_0x15dcd9[_0x2e7e73(0xb8)]);!isNaN(_0x49b43e)?document['getElementById'](_0x2e7e73(0x131))['textContent']=formatPrice(_0x49b43e):document[_0x2e7e73(0x154)](_0x2e7e73(0x131))[_0x2e7e73(0xaf)]=_0x2e7e73(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0x147))['addEventListener'](_0x2f0c2f(0x91),function(){const _0x4357c0=_0x2f0c2f,_0x1da8b6=this,_0x575267=parseFloat(_0x1da8b6[_0x4357c0(0xb8)]);!isNaN(_0x575267)?document['getElementById'](_0x4357c0(0x77))['textContent']=formatPrice(_0x575267):document[_0x4357c0(0x154)](_0x4357c0(0x77))[_0x4357c0(0xaf)]=_0x4357c0(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0x15f))[_0x2f0c2f(0x9f)](_0x2f0c2f(0x91),function(){const _0x45f1d8=_0x2f0c2f,_0x249798=this,_0x42ef5b=parseFloat(_0x249798[_0x45f1d8(0xb8)]);!isNaN(_0x42ef5b)?document['getElementById'](_0x45f1d8(0x87))[_0x45f1d8(0xaf)]=formatPrice(_0x42ef5b):document['getElementById']('formattedMontantAjoute')[_0x45f1d8(0xaf)]=_0x45f1d8(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0xf1))['addEventListener']('input',function(){const _0x2c65b8=_0x2f0c2f,_0x5c5f28=this,_0x3ba545=parseFloat(_0x5c5f28[_0x2c65b8(0xb8)]);!isNaN(_0x3ba545)?document[_0x2c65b8(0x154)](_0x2c65b8(0xdb))['textContent']=formatPrice(_0x3ba545):document[_0x2c65b8(0x154)](_0x2c65b8(0xdb))[_0x2c65b8(0xaf)]=_0x2c65b8(0xf5);}),document[_0x2f0c2f(0x154)]('editAdvanceAmount')[_0x2f0c2f(0x9f)](_0x2f0c2f(0x91),function(){const _0x478d62=_0x2f0c2f,_0x499498=this,_0xbcb9a8=parseFloat(_0x499498[_0x478d62(0xb8)]);!isNaN(_0xbcb9a8)?document[_0x478d62(0x154)]('formattedEditAdvance')[_0x478d62(0xaf)]=formatPrice(_0xbcb9a8):document[_0x478d62(0x154)](_0x478d62(0xaa))[_0x478d62(0xaf)]=_0x478d62(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0x6a))[_0x2f0c2f(0x9f)]('input',function(){const _0x34f08b=_0x2f0c2f,_0x5733af=this,_0xad7a40=parseFloat(_0x5733af[_0x34f08b(0xb8)]);!isNaN(_0xad7a40)?document[_0x34f08b(0x154)](_0x34f08b(0x130))[_0x34f08b(0xaf)]=formatPrice(_0xad7a40):document['getElementById'](_0x34f08b(0x130))[_0x34f08b(0xaf)]=_0x34f08b(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0x147))['addEventListener']('input',function(){const _0x485409=_0x2f0c2f,_0x2873e9=this,_0x3af3b9=parseFloat(_0x2873e9[_0x485409(0xb8)]);!isNaN(_0x3af3b9)?document[_0x485409(0x154)](_0x485409(0x97))[_0x485409(0xaf)]=formatPrice(_0x3af3b9):document['getElementById']('formattedModalAdvance')[_0x485409(0xaf)]=_0x485409(0xf5);}),document['getElementById'](_0x2f0c2f(0x12f))[_0x2f0c2f(0x9f)](_0x2f0c2f(0x91),function(){const _0x5980cc=_0x2f0c2f,_0x591d8b=this,_0x108822=parseFloat(_0x591d8b[_0x5980cc(0xb8)]);!isNaN(_0x108822)?document['getElementById'](_0x5980cc(0xc1))[_0x5980cc(0xaf)]=formatPrice(_0x108822):document[_0x5980cc(0x154)](_0x5980cc(0xc1))[_0x5980cc(0xaf)]='\x20F\x20CFA';}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0x69))[_0x2f0c2f(0x9f)]('input',function(){const _0x991e7a=_0x2f0c2f,_0x2b13e9=this,_0x1ba5f7=parseFloat(_0x2b13e9[_0x991e7a(0xb8)]);!isNaN(_0x1ba5f7)?document[_0x991e7a(0x154)](_0x991e7a(0x16b))['textContent']=formatPrice(_0x1ba5f7):document['getElementById'](_0x991e7a(0x16b))['textContent']=_0x991e7a(0xf5);}),document[_0x2f0c2f(0x154)](_0x2f0c2f(0xe5))['addEventListener'](_0x2f0c2f(0x91),function(){const _0x48874b=_0x2f0c2f,_0x28b024=this,_0x36a278=parseFloat(_0x28b024[_0x48874b(0xb8)]);!isNaN(_0x36a278)?document['getElementById'](_0x48874b(0x11e))[_0x48874b(0xaf)]=formatPrice(_0x36a278):document[_0x48874b(0x154)](_0x48874b(0x11e))[_0x48874b(0xaf)]=_0x48874b(0xf5);}),document[_0x2f0c2f(0x154)]('editRetourMontantAjoute')[_0x2f0c2f(0x9f)](_0x2f0c2f(0x91),function(){const _0x308853=_0x2f0c2f,_0x4ae823=this,_0x18b406=parseFloat(_0x4ae823['value']);!isNaN(_0x18b406)?document['getElementById']('editRetourFormattedMontantAjoute')['textContent']=formatPrice(_0x18b406):document[_0x308853(0x154)]('editRetourFormattedMontantAjoute')['textContent']=_0x308853(0xf5);});function loadDataFromDatabase(){const _0x51b4c0=_0x2f0c2f;currentMonth=null,database[_0x51b4c0(0x68)]()[_0x51b4c0(0x151)](_0x51b4c0(0x13d))['on']('child_added',_0x2d6d8f=>{const _0x4b174d=_0x51b4c0,_0x4d90e7=_0x2d6d8f[_0x4b174d(0xcc)]();_0x4d90e7[_0x4b174d(0x155)]!==_0x4b174d(0x7f)&&_0x4d90e7['saleType']!=='retour'&&addRowToTable(_0x4d90e7,_0x2d6d8f[_0x4b174d(0x98)],'dataTable',!![]);}),database[_0x51b4c0(0x68)](_0x51b4c0(0x10f))['orderByChild'](_0x51b4c0(0x13d))['on'](_0x51b4c0(0x8c),_0x1c5e61=>{const _0x279c87=_0x51b4c0,_0x1347e1=_0x1c5e61[_0x279c87(0xcc)]();addRowToReservationTable(_0x1347e1,_0x1c5e61[_0x279c87(0x98)],!![]);}),database['ref']('retours')['orderByChild'](_0x51b4c0(0x13d))['on'](_0x51b4c0(0x8c),_0x380798=>{const _0x104644=_0x51b4c0,_0x184fd0=_0x380798['val']();addRowToRetourTable(_0x184fd0,_0x380798[_0x104644(0x98)],!![]);}),database[_0x51b4c0(0x68)]()['on'](_0x51b4c0(0x7e),_0x474d7e=>{const _0xfb1b4f=_0x51b4c0,_0x581eea=_0x474d7e[_0xfb1b4f(0xcc)]();_0x581eea[_0xfb1b4f(0x155)]!==_0xfb1b4f(0x7f)&&_0x581eea[_0xfb1b4f(0x155)]!==_0xfb1b4f(0x117)&&updateRowInTable(_0x581eea,_0x474d7e[_0xfb1b4f(0x98)],_0xfb1b4f(0x160));}),database[_0x51b4c0(0x68)](_0x51b4c0(0x10f))['on'](_0x51b4c0(0x7e),_0x33c750=>{const _0x3b791d=_0x51b4c0,_0x1a64d3=_0x33c750[_0x3b791d(0xcc)]();updateRowInTable(_0x1a64d3,_0x33c750[_0x3b791d(0x98)],_0x3b791d(0x14c));}),database[_0x51b4c0(0x68)](_0x51b4c0(0x132))['on'](_0x51b4c0(0x7e),_0x2af9c7=>{const _0x257eb4=_0x51b4c0,_0x570ab0=_0x2af9c7['val']();updateRowInTable(_0x570ab0,_0x2af9c7[_0x257eb4(0x98)],'retourTable');}),database['ref']()['on'](_0x51b4c0(0xfc),_0x2bde0a=>{const _0x4dcdd6=_0x51b4c0;deleteRowFromTable(_0x2bde0a[_0x4dcdd6(0x98)],_0x4dcdd6(0x160));}),database['ref']('reservations')['on'](_0x51b4c0(0xfc),_0xa7dcee=>{const _0x5cfd9b=_0x51b4c0;deleteRowFromTable(_0xa7dcee['key'],_0x5cfd9b(0x14c));}),database[_0x51b4c0(0x68)]('retours')['on'](_0x51b4c0(0xfc),_0x3f7a20=>{const _0xa01b4c=_0x51b4c0;deleteRowFromTable(_0x3f7a20[_0xa01b4c(0x98)],'retourTable');});}function resetForm(_0x285f7f){const _0x4ad8f6=_0x2f0c2f;document['getElementById'](_0x285f7f)[_0x4ad8f6(0xea)](),_0x285f7f===_0x4ad8f6(0x12e)&&(document[_0x4ad8f6(0x154)](_0x4ad8f6(0x131))['textContent']=_0x4ad8f6(0xf5),document[_0x4ad8f6(0x154)](_0x4ad8f6(0x77))[_0x4ad8f6(0xaf)]=_0x4ad8f6(0xf5),document[_0x4ad8f6(0x154)]('formattedMontantAjoute')[_0x4ad8f6(0xaf)]=_0x4ad8f6(0xf5),document[_0x4ad8f6(0x154)]('saleType')[_0x4ad8f6(0xb8)]=_0x4ad8f6(0xdf),toggleAdvanceField());}
